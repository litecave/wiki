
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>Overview - Free60 Wiki archive</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Free60 Wiki archive" class="md-header__button md-logo" aria-label="Free60 Wiki archive" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Free60 Wiki archive
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Free60 Wiki archive" class="md-nav__button md-logo" aria-label="Free60 Wiki archive" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Free60 Wiki archive
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Category_Xbox360_Hardware/" class="md-nav__link">
        Hardware
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Category_Xbox360_System_Software/" class="md-nav__link">
        System Software
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Category_Xbox360_Homebrew_Software/" class="md-nav__link">
        Homebrew Software
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Category_Xbox360_Linux/" class="md-nav__link">
        Linux
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Category_Xbox360_Development/" class="md-nav__link">
        Development
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Category_Support/" class="md-nav__link">
        Support
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../%21TODO/" class="md-nav__link">
        ToDo
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="overview">Overview</h1>
<p>All non-PC components of the Xbox console are connected through an
I²C/SMbus interface. I²C/SMBus is a slow low-cost serial bus with each
device having a unique 7-bit ID. (Wikipedia has informative articles
about I²C (http://en.wikipedia.org/wiki/I2c) and SMBus
(http://en.wikipedia.org/wiki/SMBus), you might want to check them out.)</p>
<p>There are only two operations of an SMBus controller: write and read.
Writing means that an 8 bit command code and an 8 or 16 bit operand are
sent to an SMBus device. Reading means that an 8 bit command code is
sent to the device and an 8 or 16 bit answer is expected.</p>
<p>The controller for the SMBus interface in the Xbox is a PCI device with
the DevID 01B4 and it is built into MPCX southbridge.</p>
<h1 id="smbus-controller-port-layout">SMBus Controller Port Layout</h1>
<table>
<thead>
<tr class="header">
<th><p>Port</p></th>
<th><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>0xc000</p></td>
<td><p>Status bit 0: abort<br />
bit 1: collision<br />
bit 2: protocol error<br />
bit 3: busy<br />
bit 4: cycle complete<br />
bit 5: timeout</p></td>
</tr>
<tr class="even">
<td><p>0xc002</p></td>
<td><p>Control bit 2-0: cycle type<br />
bit 3: start<br />
bit 4: enable interrupt<br />
bit 5: abort</p></td>
</tr>
<tr class="odd">
<td><p>0xc004</p></td>
<td><p>Address</p></td>
</tr>
<tr class="even">
<td><p>0xc006</p></td>
<td><p>Data</p></td>
</tr>
<tr class="odd">
<td><p>0xc008</p></td>
<td><p>Command</p></td>
</tr>
</tbody>
</table>

<p>This is very similar (but not identical) to the AMD756/AMD766/AMD768
SMBus controllers. The <a href="https://web.archive.org/web/20150627102528/http://www.lm-sensors.org/">lm_sensors project</a>
includes GPLed Linux kernel code for it since version 2.6.4
(kernel/busses/i2c-amd756.c).</p>
<h1 id="smbus-controller-programming">SMBus Controller Programming</h1>
<p>The following two routines illustrate how to read and write data from
and to an SMBus
device:</p>
<p><code>int SMBusWriteCommand(unsigned char slave, unsigned char command, int isWord, unsigned short data) {</code>
<code>again:</code>
<code>_outp(0xc004, (slave&lt;&lt;1)&amp;0xfe);</code>
<code>_outp(0xc008, command);</code>
<code>_outpw(0xc006, data);</code>
<code>_outpw(0xc000, _inpw(0xc000));</code>
<code>_outp(0xc002, (isWord) ? 0x0b : 0x0a);</code>
<code>while ((_inp(0xc000) &amp; 8)); /* wait while busy */</code>
<code>if (_inp(0xc000) &amp; 0x02) goto again; /* retry transmission */</code>
<code>if (_inp(0xc000) &amp; 0x34) return 0;  /* fatal error */</code>
<code>return 1;</code>
<code>}</code>
<code>int SMBusReadCommand(unsigned char slave, unsigned char command, int isWord, unsigned short *data) {</code>
<code>again:</code>
<code>_outp(0xc004, (slave&lt;&lt;1)|0x01);</code>
<code>_outp(0xc008, command);</code>
<code>_outpw(0xc000, _inpw(0xc000));</code>
<code>_outp(0xc002, (isWord) ? 0x0b : 0x0a);</code>
<code>while ((_inp(0xc000) &amp; 8)); /* wait while busy */</code>
<code>if (_inp(0xc000) &amp; 0x02) goto again; /* retry transmission */</code>
<code>if (_inp(0xc000) &amp; 0x34) return 0;  /* fatal error */</code>
<code>*data = _inpw(0xc006);</code>
<code>return 1;</code>
<code>}</code></p>
<p>To avoid busy waiting of the CPU, the SMBus controller can also issue an
interrupt when the operation is complete, by setting bit #4 in the
control port when initiating the transfer.</p>
<h1 id="xbox-smbus-devices">Xbox SMBus Devices</h1>
<p>The following four devices are connected to the Xbox SMBus:</p>
<p>Device Hardware Address Software Address PIC16LC 0x10 0x20 Conexant
CX25871 Video Encoder 0x45 0x8a ADM1032 System Temperature Monitor 0x4c
0x98 Serial EEPROM 0x54 0xa8 Do not confuse the hardware with the
software addresses: The software ID is the hardware ID shifted by one
bit left. The code above expects the hardware ID.</p>
<p>Actually, these addresses are not literally accurate; you find that the
hardware address is 0x54 for the EEPROM: the actual address of the
EEPROM on the i2c bus is 1010 (0xa), however, you will also notice that
0x54 is 1010100 in binary, and it seems that this 100 is also appended
onto the other devices as well (although their software address is
naturally read as say 10101000 - obviously because of the left shifting,
however, it could be speculated that it would be possible to communicate
with devices over the SMBus that are connected via i2c, so long as you
knew their base address.</p>
<p>Retrieved from "<a href="http://www.xbox-linux.org/wiki/SMBus_Controller">http://www.xbox-linux.org/wiki/SMBus_Controller</a>"</p>
<p><a href="Category:Xbox_Hardware" title="wikilink">Category:Xbox_Hardware</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.febc23d1.min.js"></script>
      
    
  </body>
</html>